<details>
<summary>分布式概念</summary>
<!-- TOC -->

- [理论](#理论)
- [分布式系统](#分布式系统)
- [算法](#算法)
  - [raft](#raft)

<!-- /TOC -->
</details>

# 理论

CAP理论

WEB服务无法同时满足以下3个属性:

- 一致性(Consistency): 分为强/弱/最终一致性
  - 强一致性: 要求更新后的数据能被后续的访问都能看到
  - 弱一致性: 能容忍后续的部分或全部访问不到
  - 最终一致性: 经过一段时间后能访问到更新后的数据
- 可用性(Availability): 服务在正常响应时间内一直可用, 不出现用户操作失败或访问超时等情况
- 分区容错性(Partition Tolerance): 分布式系统在遇到某节点或网络分区故障的时候, 仍然能对外提供满足一致性或可用性的服务

CAP 只能满足其2, 不能全部满足. 其中 P 属性在分布式系统中是始终会存在的, 所以通常谈 CAP 都指的是 CA 的取舍.

不要求一致性: 节点之间可能失去联系, 为了高可用, 每个节点只能使用本地数据提供服务, 这回导致全局数据的不一致性: 目前很多 NoSQL 是属于此类.
不要求可用性: 相当于在节点之间要求强一致性, 一些传统数据库的分布式事务就是属于这种.

---

BASE理论

* Basically Available(基本可用):
* Soft state(软状态):
* Eventually consistent(最终一致性):

# 分布式系统

分布式系统中删除, 增加所带来的影响及解决方案

- 强一致性: 牺牲可用性, 节点之间要求必须同步, 如果出现分区的情况, 同步操作会一直等待, 导致 节点不可用.
- 弱一致性: 允许分区之间数据不一致, 分区时继续提供服务, 在分区合并后也不要求数据一致
- 最终一致性: 允许分区之间数据不一致, 分区时继续提供服务, 在分区合并后要求数据一致(同步)

# 算法

## raft

[动态图](http://thesecretlivesofdata.com/raft/)

属于强一致性的 CP 系统, 牺牲了部分可用性(在分区后的少节点分区中发生)

ETCD, Consul
