<details>
<summary>点击展开目录</summary>
<!-- TOC -->

- [存储引擎](#存储引擎)
    - [MyISAM](#myisam)
    - [InnoDB](#innodb)

<!-- /TOC -->
</details>

## 存储引擎

### MyISAM

索引为非聚集型, 索引和数据分开存储, B+Tree索引结构的叶节点data域存储的数据地址

* 查询性能好, 写操作有欠缺.
* 索引的指针: 索引btree上的节点是一个指向数据物理位置的指针, 所以查找起来很快
* 锁的策略: MyISAM是表锁, 涉及到写操作都是串行的, 没有行锁
* 一次封锁技术, 不会发生死锁
* 不支持事务, 也没有类似 redo log 的事务日志
* 可以没有主键, 不支持外键
* 存储文件有frm、MYD、MYI, 依次为表结构, 数据, 索引文件;数据存储时顺序存储

### InnoDB

索引为聚集型, 数据本身就是B+Tree索引结构, 所以叶节点包含了完整的数据, data域记录的也是主键值, 这也要求表必须有主键, 没有则会创建一个长度为6, 长整型的隐式主键.

* 支持行锁
* 索引的指针: innodb索引节点存的则是数据的主键, 所以需要根据主键二次查找.
* 锁的策略: InnoDB 有行锁, 只有写写操作会阻塞.
* 支持事务, 同时有 undo/redo log 保证事务特性
* 必须有唯一行字段, 可理解为必须有主键, 支持外键
* 存储文件有frm、ibd, 数据存储时分页存储, 数据的增删可能使页发生变化


两阶段锁定协议(two-phase locking protocol)

为了保证事务的隔离性, 即并发场景下多个事务的执行等同于串行
