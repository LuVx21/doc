---
title: 设计模式:面向对象设计原则
date: 2017-07-01
tags:
- 设计模式
---
<!-- TOC -->

- [面向对象设计原则](#面向对象设计原则)
- [单一职责原则](#单一职责原则)
- [开闭原则](#开闭原则)
- [里氏代换原则](#里氏代换原则)
- [接口隔离原则](#接口隔离原则)
- [依赖倒转原则](#依赖倒转原则)
- [合成复用原则](#合成复用原则)
- [迪米特法则](#迪米特法则)
- [参考:](#参考)

<!-- /TOC -->
# 面向对象设计原则

SOLID

| 设计原则                                            | 定义                                             | 使用频率 |
| :-------------------------------------------------- | :----------------------------------------------- | :------- |
| 单一职责原则 (Single Responsibility Principle, SRP) | 一个类只负责一个功能领域中的相应职责             | ★★★★☆    |
| 开闭原则 (Open-Closed Principle, OCP)               | 软件实体应对扩展开放,而对修改关闭                | ★★★★★    |
| 里氏代换原则 (Liskov Substitution Principle, LSP)   | 所有引用基类对象的地方能够透明地使用其子类的对象 | ★★★★★    |
| 接口隔离原则 (Interface Segregation Principle, ISP) | 使用多个专门的接口,而不使用单一的总接口          | ★★☆☆☆    |
| 依赖倒转原则 (Dependence Inversion Principle, DIP)  | 要针对接口编程,而不是针对实现编程                | ★★★★★    |
| 合成复用原则 (Composite Reuse Principle, CRP)       | 尽量使用对象组合,而不是继承来达到复用的目的      | ★★★★☆    |
| 迪米特法则 (Law of Demeter, LoD)                    | 一个软件实体应当尽可能少地与其他实体发生相互作用 | ★★★☆☆    |

# 单一职责原则

高内聚, 低耦合


# 开闭原则

增加功能时, 新加代码往往比修改现有代码更稳妥


# 里氏代换原则

父类具有的特征或行为, 子类必须要有, 反过来不成立
父类的范围太广, 子类实质上是在父类基础上加了诸多约束, 指向性也变得明显

由于使用基类对象的地方都可以使用子类对象, 因此在程序中尽量使用基类类型来对对象进行定义, 而在运行时再确定其子类类型, 用子类对象来替换父类对象

新加功能时候, 尽量使用新增子类和新增接口的方式实现, 不要在现有继承体系中加功能

# 接口隔离原则

一接口一角色, 需要什么用什么

降低接口的粒度

# 依赖倒转原则

在代码中传递参数或在关联关系中, 尽量使用层级高的抽象层来作为方法参数的类型, 方法返回类型以及成员变量的类型, 而不是使用具体的实现类.

在该原则下, 如果一个类除了实现父类方法外, 还自定义了自己独有的方法或成员变量, 此时将无法使用子类中的这些方法.

依赖注入是指当一个对象要与其他对象发生依赖关系时, 通过抽象来注入所依赖的对象,

构造注入, 设值注入(Setter注入)和接口注入.
构造注入是指通过构造函数来传入具体类的对象, 设值注入是指通过Setter方法来传入具体类的对象, 而接口注入是指通过在接口中声明的业务方法来传入具体类的对象

举个栗子就是, 当创建一个对象a时, 该a对象依赖其他对象, 那么创建用的参数尽量使用层级高的对象, 以应对可能发生的更改

假如要创建一个车对象, 现有关系如

`车 -> 车身 -> 底盘 -> 轮胎`这个依赖关系, 可以看出, 轮胎处于被依赖的顶点, 创建车时需要轮胎这个参数, 这一参数跨越整个创建过程, 这是一个不好的设计, 因为轮胎的更改变化会影响整条依赖链路

如果将依赖关系反过来, `轮胎 -> 底盘 -> 车身 -> 车`, 车处于被依赖的定点, 创建车时的参数只需要车身, 而不需要轮胎, 至于车身怎么创建不需要关系, 以此类推, 最后轮胎的变化只会影响底盘

[阅读](https://www.zhihu.com/question/23277575/answer/169698662)

# 合成复用原则

复用时要尽量使用组合/聚合关系(关联关系), 少用继承
如果两个类之间是"Has-A"的关系应使用组合或聚合, 如果是"Is-A"关系可使用继承

如一个dao可以直接继承自dbutil类, 从而能够使用getConnection等方法, 实现连接数据库的功能.

如果遇到更换数据库的情形, 如从Oracle迁移到MySQL, 那么就需要修改dbutil类, 这将违反开闭原则.

如果是将dbutil作为dao的成员变量, 在迁移时新加一个子dbutil注入给dao的util, 就能实现不更改现有代码基础上实现迁移.

# 迪米特法则

迪米特法则可降低系统的耦合度, 使类与类之间保持松散的耦合关系

当系统的其中一个模块发生变化, 要尽可能少的影响其他模块.

如对一个画面上的某一部分的内容进行刷新时, 不对整个画面进行刷新以达到刷新某一部分的需求, web开发中, ajax是实现这种需求的重要手段.

# 参考:

1. [设计模式Java版](https://gof.quanke.name)

